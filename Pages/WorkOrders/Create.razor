@using PrintingJobTracker.Shared
@using Microsoft.AspNetCore.Components.Forms
@using PrintingJobTracker.Services
@using PrintingJobTracker.Models
@page "/workorders/new"
@inject PrintingJobTracker.Services.IWorkOrdersService Service
@inject NavigationManager Nav

<h2>New Work Order</h2>

<EditForm Model="_model" OnValidSubmit="Save">
  <DataAnnotationsValidator />
  <ValidationSummary />

  <div class="mb-2">
    <label class="form-label">ClientName</label>
    <InputText class="form-control" @bind-Value="_model.ClientName" />
  </div>

  <div class="mb-2">
    <label class="form-label">JobName</label>
    <InputText class="form-control" @bind-Value="_model.JobName" />
  </div>

  <div class="mb-2">
    <label class="form-label">Quantity</label>
    <InputNumber class="form-control" @bind-Value="_model.Quantity" />
  </div>

  <div class="mb-2">
    <label class="form-label">Carrier</label>
    <InputSelect class="form-select" @bind-Value="_model.Carrier">
      <option value="">--</option>
      <option>USPS</option>
      <option>UPS</option>
      <option>FedEx</option>
    </InputSelect>
  </div>

  <div class="mb-3">
    <label class="form-label">SLA_MailBy</label>
    <InputDate class="form-control" @bind-Value="_model.SLA_MailBy" />
  </div>

  <button class="btn btn-primary">Save</button>
  <a class="btn btn-secondary ms-2" href="/workorders">Cancel</a>
</EditForm>

@code {
  private Job _model = new();

  private async Task Save()
  {
      await Service.CreateJobAsync(_model);
      Nav.NavigateTo("/workorders");
  }
}